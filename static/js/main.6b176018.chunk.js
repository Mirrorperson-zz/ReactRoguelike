(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{209:function(t,e,a){},211:function(t,e,a){},213:function(t,e,a){"use strict";a.r(e);var n=a(0),s=a.n(n),i=a(35),r=a.n(i),o=(a(90),a(16)),c=a(36),l=a(18),u=a(17),p=a(19),g=(a(92),a(37)),d=a(84),f=a(10),h=function(t){var e;switch(t.tileType){case 0:e=s.a.createElement("div",{className:"tile grass"});break;case 1:e=s.a.createElement("div",{className:"tile rock"});break;case 2:e=s.a.createElement("div",{className:"tile tree"});break;case 3:e=s.a.createElement("div",{className:"tile water"});break;default:e=s.a.createElement("div",{id:t.id,className:t.tileType})}return e},w=a(3),m=function(){return"a0"},v=function(t,e){return t.map(function(t){return t[0]===e[0]&&t[1]===e[1]}).includes(!0)},y=function(t,e,a){return t[e][a]},b=function(t,e){return e.findIndex(function(e){return e.state.id===t})},T=function(t,e){return e.find(function(e){return e.state.id===t})},k=function(t,e){t&&console.log(e)},E=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.floor(Math.random()*(t-e))+e},S=function(t,e){var a=Object(f.a)(t.map(function(t){return Object(f.a)(t)}));return e.forEach(function(t){var e=t.state.position;a[e[0]][e[1]]=t.state.id}),a},A=function(t){function e(t){var a;Object(o.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).state={},a.UpdateAgent=function(t){a.state.position=t},a.PerformDeath=function(t){var e=b(a.state.id,t);t.splice(e,1)};var n=t.position?t.position:w[t.type].startPosition;return a.state={id:t.id,type:t.type,str:w[t.type].str,agi:w[t.type].agi,dex:w[t.type].dex,wis:w[t.type].wis,int:w[t.type].int,position:n},a}return Object(p.a)(e,t),e}(n.Component),O=a(49),j=a.n(O),x=function(t,e,a,n){k(n.test,"key pressed "+a);var s=n.agents.map(function(t){return Object.assign({},t)}),i=T(t,s),r="player"===i.state.type?n.playerPosEdgeGap:0,o=function(t,e,a,n,s){var i;switch(e){case"ArrowLeft":i=[t[0]-1,t[1]];break;case"ArrowRight":i=[t[0]+1,t[1]];break;case"ArrowUp":i=[t[0],t[1]-1];break;case"ArrowDown":i=[t[0],t[1]+1];break;default:i=t}if(!(i[0]<s||i[0]>=a-s||i[1]<s||i[1]>=n-s))return i}(e,a,n.columns,n.rows,r,i.state.type);if("undefined"!==typeof o){var c=function(t,e,a){var n=a.tilesAgentsStates[t[0]][t[1]];return T(n,e)}(o,s,n);return c&&function(t,e,a){t.state.str>e.state.str?(t.state.str-=e.state.str,e.PerformDeath(a)):(t.PerformDeath(a),e.state.str-=t.state.str,e.state.str<=0&&e.PerformDeath(a))}(i,c,s),i.UpdateAgent(o),{agents:s,tilesAgentsStates:S(n.tilesStates,s)}}},C=function(t){var e,a,n=function(t){var e,a=[];t.forEach(function(t,n){e=0===n?0:a[n-1],a.push(t.state.agi+E(10)+e)});for(var n=E(a[a.length-1]),s=0,i=Object.entries(a);s<i.length;s++){var r=i[s],o=Object(g.a)(r,2),c=o[0];if(n<o[1])return t[c]}}(t.agents);if("player"===n.state.type)return null;for(;void 0===e;){switch(E(4)){case 1:a="ArrowLeft";break;case 2:a="ArrowUp";break;case 3:a="ArrowRight";break;case 4:a="ArrowDown"}e=x(n.state.id,n.state.position,a,t)}return[e,n.state.id,a]},P=function(t,e,a){for(var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=[],i=0;i<t.rows;i++)s.push([]);for(var r=0;r<t.rows;r++)for(var o=0;o<t.columns;o++){var c=E(100);c>=a[0]&&c<a[1]?s[r].push(e.tileTypes.grass):c>=a[1]&&c<a[2]?s[r].push(e.tileTypes.rock):c>=a[2]&&c<a[3]?s[r].push(e.tileTypes.tree):c>=a[3]&&c<a[4]&&s[r].push(e.tileTypes.water)}var l=D(t,e,s,s);return z(e,l,s),k(n,l),s},D=function(t,e,a,n){for(var s,i,r=[],o=0;o<t.rows;o++)for(var c=0;c<t.columns;c++)if(a[o][c]===e.tileTypes.water){if(!(s=!r.length>0)){for(var l=[],u=0;u<r.length;u++)l.push(v(r[u],[o,c]));i=!l.includes(!0)}if(s||i){for(var p=[[o,c]],g=void 0,d=void 0,f=0;f<p.length;f++)g=p[f][0],d=p[f][1],f<10?N(e,n,g,d,p):k(e.test,"Error - newPondTile >= 10");r.push(p)}}return r},N=function(t,e,a,n,s){0!==a&&y(e,a-1,n)===t.tileTypes.water&&(v(s,[a-1,n])||s.push([a-1,n])),a!==t.rows-1&&y(e,a+1,n)===t.tileTypes.water&&(v(s,[a+1,n])||s.push([a+1,n])),0!==n&&y(e,a,n-1)===t.tileTypes.water&&(v(s,[a,n-1])||s.push([a,n-1])),n!==t.columns-1&&y(e,a,n+1)===t.tileTypes.water&&(v(s,[a,n+1])||s.push([a,n+1]))},z=function(t,e,a){var n=0,s=t.condenseLimit,i=t.tileTypes.water,r=t.rows;return e.map(function(t){if(n=Math.floor(Math.random()*s-1)+1,t.length<3)for(var e=function(e){t.map(function(t){0!==t[0]&&a[t[0]-1][t[1]]!==i&&e<n&&(a[t[0]-1][t[1]]=i,e++),t[0]!==r-1&&a[t[0]+1][t[1]]!==i&&e<n&&(a[t[0]+1][t[1]]=i,e++),0!==t[1]&&a[t[0]][t[1]-1]!==i&&e<n&&(a[t[0]][t[1]-1]=i,e++),t[1]!==r-1&&a[t[0]][t[1]+1]!==i&&e<n&&(a[t[0]][t[1]+1]=i,e++)}),o=e},o=0;o<n;o++)e(o)})},L=a(83),U=a.n(L),I=function(t,e){var a=Object(f.a)(t.agents),n=0,s=M("a"+n,"player");return a.push(s),n++,e.forEach(function(e,i){e.forEach(function(e,r){var o=E(100)<10;if(U.a.isEqual(s.state.position,[i,r])&&(o=!1),o){var c=E(Object.keys(w).length-1,1);switch(e){case t.tileTypes.grass:case t.tileTypes.rock:case t.tileTypes.tree:case t.tileTypes.water:}var l=Object.keys(w).filter(function(t){return"player"!==t})[c];a.push(M("a"+n,l,[i,r])),n++}})}),k(t.test,Object.keys(w)),a},M=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new A({id:t,type:e,position:a})},W=a(7),B=a.n(W);window.jQuery=window.$=B.a;var K=function(t){function e(t){var a;Object(o.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).state={test:a.props.test,agentCounter:0,columns:a.props.columns,rows:a.props.rows,tilesStates:[[]],tilesAgentsStates:[[]],tileTypes:{grass:0,rock:1,tree:2,water:3},tileOccuranceLimits:[0,60,75,85,100],ponds:[],condenseLimit:3,agents:[],playerPosEdgeGap:2,playersTurn:!0},a.handleKeyPress=function(t){if(a.state.playersTurn){var e=T(m(),a.state.agents),n=Object(f.a)(e.state.position),s=x(m(),n,t.key,a.state);j.a.isEqual(e.state.position,n)||a.setState(function(t){return{agents:s.agents,tilesAgentsStates:s.tilesAgentsStates,playersTurn:!1}})}};var n=P(t,a.state,a.state.tileOccuranceLimits),s=I(a.state,n),i=S(n,s);return a.state=Object(d.a)({},a.state,{agents:s,tilesStates:n,tilesAgentsStates:i,agentCounter:a.state.agentCounter+s.length}),a}return Object(p.a)(e,t),Object(c.a)(e,[{key:"componentDidUpdate",value:function(){if(!this.state.playersTurn){var t,e,a,n,s=this,i=C(this.state);if(null!==i){var r,o=Object(g.a)(i,3);switch(t=o[0],e=o[1],n=o[2],a=B()("#".concat(e)).position(),B()("#".concat(e)).clone().prop("id","".concat(e,"Clone")).css({position:"absolute",left:a.left,top:a.top}).appendTo(B()("#".concat(e)).parent()),B()("#".concat(e)).addClass("tile-clone"),n){case"ArrowLeft":r={left:a.left-36};break;case"ArrowUp":r={top:a.top-36};break;case"ArrowRight":r={left:a.left+36};break;case"ArrowDown":r={top:a.top+36}}B()("#".concat(e,"Clone")).animate(r,1e3,function(){B()("div[id$=Clone]").remove(),s.setState(function(e){return{agents:t.agents,tilesAgentsStates:t.tilesAgentsStates}})})}else this.setState(function(t){return{playersTurn:!0}})}}},{key:"render",value:function(){var t=this;return k(this.state.test,this.state.tilesAgentsStates),s.a.createElement("div",{tabIndex:"0",onKeyDown:this.handleKeyPress},this.state.tilesAgentsStates.map(function(e,a){return s.a.createElement("div",{key:a},t.state.tilesAgentsStates[a].map(function(e,n){return s.a.createElement(h,{id:e,tileType:"a"===e[0]?"tile "+T(e,t.state.agents).state.type:e,agent:T(e,t.state.agents),key:a*t.state.rows+n,test:t.state.test})}))}))}}]),e}(n.Component),R=(a(209),a(211),function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).handleSubmit=function(t){if(t.preventDefault(),a.state.height>20||a.state.width>20||a.state.height<7||a.state.width<7)a.setState({invalidSize:!0});else{var e=s.a.createElement(K,{rows:a.state.height,columns:a.state.width,test:!0});r.a.render(e,document.getElementById("App")),a.setState({setSize:!1})}},a.handleChange=function(t){"width"===t.target.id?a.setState({width:t.target.value}):a.setState({height:t.target.value})},a.state={width:10,height:10,setSize:!0,invalidSize:!1},a}return Object(p.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("form",{className:"App-interface ".concat(this.state.setSize?"":"hidden"),onSubmit:this.handleSubmit},s.a.createElement("label",null,"Select map size"," ",s.a.createElement("span",{className:"".concat(this.state.invalidSize?"warning-text":"")},"(min: 7, max: 20)")),s.a.createElement("br",null),s.a.createElement("label",null,"Height: "),s.a.createElement("input",{type:"int",id:"height",value:this.state.height,onChange:this.handleChange}),s.a.createElement("span",null,"\xa0\xa0\xa0\xa0"),s.a.createElement("label",{id:"lblWidth"},"Width: "),s.a.createElement("input",{type:"int",id:"width",value:this.state.width,onChange:this.handleChange}),s.a.createElement("span",null,"\xa0\xa0\xa0\xa0"),s.a.createElement("input",{id:"Submit",type:"submit"})),s.a.createElement("div",{id:"App",className:"App"}))}}]),e}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},3:function(t){t.exports={player:{str:5,agi:5,dex:5,wis:5,int:5,startPosition:[2,2],genericTags:""},dog:{str:5,agi:5,dex:5,wis:5,int:5,genericTags:""},cat:{str:5,agi:5,dex:5,wis:5,int:5,genericTags:""},snake:{str:5,agi:5,dex:5,wis:5,int:5,genericTags:""},pigeon:{str:5,agi:5,dex:5,wis:5,int:5,genericTags:""},bear:{str:5,agi:5,dex:5,wis:5,int:5,genericTags:""},piranha:{str:5,agi:5,dex:5,wis:5,int:5,genericTags:""},alligator:{str:5,agi:5,dex:5,wis:5,int:5,genericTags:""},tarantula:{str:5,agi:5,dex:5,wis:5,int:5,genericTags:""},"sydney-funnel-web":{str:5,agi:5,dex:5,wis:5,int:5,genericTags:""},gorilla:{str:5,agi:5,dex:5,wis:5,int:5,genericTags:""},"silverback-gorilla":{str:5,agi:5,dex:5,wis:5,int:5,genericTags:""}}},85:function(t,e,a){t.exports=a(213)},90:function(t,e,a){},92:function(t,e,a){t.exports=a.p+"static/media/logo.5d5d9eef.svg"}},[[85,2,1]]]);
//# sourceMappingURL=main.6b176018.chunk.js.map